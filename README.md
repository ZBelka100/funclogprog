# Starlight Sky

Разделы: 
- [Starlight Sky](#starlight-sky)
  - [О языке](#о-языке)
  - [Использование интерпретатора](#использование-интерпретатора)
  - [Установка расширения для подсветки синтаксиса](#установка-расширения-для-подсветки-синтаксиса)
  - [Синтаксис языка и примеры использования](#синтаксис-языка-и-примеры-использования)
    - [Операции](#операции)
    - [Переменные](#переменные)
    - [Функции](#функции)
      - [Функция вычисляющая факториал](#функция-вычисляющая-факториал)
    - [Списки](#списки)
    - [Ветвление](#ветвление)
    - [Вывод данных](#вывод-данных)
    - [Операции с файлом](#операции-с-файлом)
      - [Чтение](#чтение)
      - [Запись](#запись)
  - [Стандартная библиотека](#стандартная-библиотека)
  - [Таблица участников и их обязанности](#таблица-участников-и-их-обязанности)

## О языке
Особенности нашего функционального языка: он ленивый, вычисления не будут делаться, пока не попросят; он не чувствителен к пробелам и табуляциям.

Реализованные функции:

* [x] Именованные переменные (`let`)
* [x] Рекурсия
* [x] Ленивое вычисление
* [x] Функции
* [x] Замыкания
* [x] Библиотечные функции: ввод-вывод файлов
* [x] Списки
* [x] Библиотечные функции: списки


## Использование интерпретатора
Для запуска собственных програм `.mma`, необходимо скачать последний релиз из [списка релизов](https://github.com/MAILabs-Edu-2024/fp-compiler-lab-starlight-sky/releases), и запустить интерпретатор командой через консоль (windows):
```
./*PATH TO INTERPRETER*/Main.exe *PATH TO .mma FILE*
```
Либо самостоятельно собрав проект из исходных файлов, и также запустить, подав на вход аргументом командной строки путь к интерпретируемому файлу.

## Установка расширения для подсветки синтаксиса

Расширение - файл `mmaextention-1.0.1.vsix`. Для его установки во вкладке `Extentions` выберите `Install from VSIX`  и файл.

<!--[скриншот](ссылка_на_скриншот)-->

## Синтаксис языка и примеры использования

### Операции

В языке присутствуют операции:

- сложения (`add(float, float)`)
- вычитания (`sub(float, float)`)
- умножения (`mul(float, float)`)
- деления (`div(float, float)`)

А также, операции сравнения:

- равенства (`eq(_, _)` для строк и чисел типа `float`)
- неравенства (`neq(_, _)` для строк и чисел типа `float`)
- больше (`gt(float1, float2)` - `float1 > float2`)
- меньше (`lt(float1, float2)` - `float1 < float2`)
- больше или равно (`gte(float1, float2)` - `float1 >= float2`)
- меньше или равно (`lte(float1, float2)` - `float1 <= float2`).


### Переменные

Переменные в языке определяются словом `detect` как показано на примере ниже:

```
detect _fl_var = 13

printfn _fl_var
```

```
detect x = printfn "Hello world!"
x
```

### Функции 

Для написания функции необходимо воспользоваться ключевым словом `lambda`. Для создания функции необходимо сделать патерну: `lambda name_of_function [arguments, for, your, function] = {your code}`.

Для вызова функции необходимо воспользоваться знаком `$`. Соответственно вызов функции имеет патерн: `$ func_name [list, of, arguments]`. Пример:

#### Функция вычисляющая факториал

```
lambda factorial [_x] = { if eq(   _x, 1         ) => 1 else mul(_x, $ factorial [sub( _x, 1)]) }

printfn $ factorial [7]
printfn $ factorial [8]
```


### Списки

В нашем языке представлены списки называемые `catalog` (каталоги). Элементы внутри каталога разделяются при помощи `|`. В каталоге могут находится любые сущности. 

Пример каталога: 


Для каталогов реализованы базовые операции, позволяющие делать все что угодно: 
- `catalog_name с.first` - возвращает первый элемент списка
```
printfn catalog (1 | 2 | x | catalog (5 | 10) | "Hi!") c.first
```

- `catalog_name с.last` - возвращает хвост списка
```
detect list = catalog (1 | 2 | x | catalog (5 | 10) | "Hi!") 

printfn list c.tail
```

- `catalog_name_1 '<->' catalog_name_2` - конкатенация каталогов.
```
detect list = catalog (1 | 2 | x | catalog (5 | 10) | "Hi!") <-> catalog (a | b | c) 

printfn list
```
Или так
```
printfn catalog (1 | 2 | x | catalog (5 | 10) | "Hi!") <-> catalog (a | b | c)
```


### Ветвление 

Для создания условий в язык введены `if`, `else`, `=>`. Для строительства условного оператора необходимо придерживаться синтаксиса: `if` `conditions` `=>` `code_if_conditions_true` `else` `code_if_conditions_false`.

```
lambda check [x] = { if eq(x, 1 ) => printfn 1 else printfn 2 }
$ check [10]
```

### Вывод данных

Для вывода данных существует две функции `print` и `printfn`. Функции могут выводить `string`, `float`, `catalog`, в случае попытки вывести что-то иное, существует обработчик ошибок.

### Операции с файлом

Для операций с файлами существуют команды `ReadFromFile` и `WriteToFile`. В аргументах функции принимают: `ReadFromFile path/to/file` и `WriteToFile path/to/file string`. Пример синтаксиса работы с файлами: 
#### Чтение
```
detect x = ReadFromFile "tests.mma"

printfn x
```
#### Запись
```
WriteToFile "tests.mma" "Hello World!"

detect x = ReadFromFile "tests.mma"
printfn x
```

[В папке примеров](docs/examples/)

## Стандартная библиотека
Для упрощения работы с языком, будет написана стандартная библиотека.
Сдесь будут описаны её функции и инструкции по использованию


## Таблица участников и их обязанности

| Создатель       | Обязанности                  |
|-----------------|------------------------------|
| Михаил Губарев  |Создание интерпретатора и структуры AST|
| Максим Заславцев| Создание парсера и синтаксиса языка|
| Андрей Забелкин | Расширение для VS code, написание стандартной библиотеки |
